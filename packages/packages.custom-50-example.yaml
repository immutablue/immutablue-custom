# Packages yaml filename should be in the format of
# packages-custom-<2-numbers>-<description>.yaml 
# - Example: packages-custom-10-my-containers.yaml
# It is **IMPORTANT** to note that these are ran in alphanumeric order.
# (same order that you would get if you did `ls -l ./packages`)
# Meaning, if you are attempting to modify already existing distrobox
# containers for example. Understand the ordering of how they are ran.

# Immutablue section, which applies to **YOUR** build of 
# immutablue
immutablue:
  # Repo URLs to add in the build (they are curled)
  repo_urls:
  # - name: tailscale.repo 
  #   url: https://pkgs.tailscale.com/stable/fedora/tailscale.repo
  # We can also set repo_urls per architecture
  repo_urls_aarch64:
  repo_urls_x86_64:

  # RPM packages you want to install
  # Same name as anything you'd normally install with `dnf install <name>`
  rpm:
  - emacs

  # these can be set for speicific builds too (see /usr/immutablue/build_options)
  rpm_silverblue:
  - neovim

  # these can be set for speicific builds too (see /usr/immutablue/build_options)
  rpm_gui:
  - neovim-qt

  # You can specify RPMs for specific archs only
  rpm_aarch64:
  rpm_x86_64:

  # Urls to RPMs to download (they are curled)
  # so provide the url
  rpm_url:
  rpm_url_aarch64:
  rpm_url_x86_64:

  # RPM packages you want to remove from the image
  rpm_rm:
  - tailscale

  # You can remove 
  rpm_rm_aarch64:
  rpm_rm_x86_64:

  # Build files that need to be removed. If the build is filing about some
  # ephemeral file that exists, put the path here so it get removed in 
  # the later build stages
  file_rm:
  - /etc/yum.repos.d/tailscale.repo
  # - /path/to/some/file
  # - /path/to/some/dir
  # Files can be removed per architecture as well
  file_rm_aarch64:
  file_rm_x86_64:


  # Repositories for Flatpaks
  flatpak_repos:
    - name: flathub
      url: https://dl.flathub.org/repo/flathub.flatpakrepo 

  flatpak_repos_aarch64:
  flatpak_repos_x86_64:

  # Runtimes for Flatpaks
  # (Can query with `flatpak list --app --columns=application,runtime`)
  # Really only needed if you plan to build an iso
  flatpaks_runtime:
  # - org.gnome.Platform/x86_64/46 
  # - org.freedesktop.Platform/x86_64/23.08 
  
  
  # Flatpaks to be installed
  # Check https://flathub.org
  flatpaks:
  # - com.discordapp.Discord 
  # - us.zoom.Zoom

  # Architecture specific
  flatpaks_aarch64:
  flatpaks_x86_64:

  #Flatpaks to be uninstalled 
  flatpaks_rm:
  # - org.chromium.Chromium

  # Remove Architecture specific flatpaks
  flatpaks_rm_aarch64:
  flatpaks_rm_x86_64:

  # Services 
  # enable
  services_enable_sys:

  # xrdp requires a gui, so only do it for gui builds
  # (not-nucleus)
  services_enable_sys_gui:
  - xrdp.service
  # disable services
  services_disable_sys:
  # mask a service
  services_mask_sys:
  # unmask the service
  services_unmask_sys:

  # User services 
  # Handled in immutablue installer
  # enable
  services_enable_user:
  # disable services
  services_disable_user:
  # mask a service
  services_mask_user:
  # unmask the service
  services_unmask_user:


distrobox:
# Give it a name, you can later enter this with
# `distrobox enter <name>`
- name: my-dbox
  # Which image should it be based off of? 
  # See supported images with:
  #   `distrobox create --compatibility``
  image: registry.fedoraproject.org/fedora:41
  # Does this need to be ran as a root image?
  # Equal to `distrobox create --root`
  # Should be `true` or `false`
  root: false
  # Additional flags to pass to podman. You might
  # need --privileged for example for VPN software
  additional_flags:
  # - --privileged
  # You can also specify flags for certain architecture
  additional_flags_aarch64:
  additional_flags_x86_64:
  # What are the commands used to install and 
  # update packages in a way that requires 
  # no user input? 
  # - dnf install -y 
  # - apt-get install -y 
  # - pacman -S --noconfirm
  # are all examples
  pkg_inst_cmd: dnf install -y
  pkg_updt_cmd: dnf update -y
  # Run any extra commands you want here...
  # - Uninstalling stuff 
  # - Adding in new repos 
  # - etc...
  extra_commands: |
    echo "Hi there!" && \
    cat /run/.containerenv
  # What are the packages you want to install?
  packages:
  - htop 
  - neofetch
  - nautilus
  # Architecture specific packages 
  packages_aarch64: 
  packages_x86_64:
  # Pakages to be install with npm 
  # (installed with -g option in the container)
  npm_packages:
  # - <some_npm_package>
  npm_packages_aarch64:
  npm_packages_x86_64:
  #
  # Pakages to be install with pip
  # (installed globally in the container)
  pip_packages:
  # - <some_pip_package>
  pip_packages_aarch64:
  pip_packages_x86_64:
  #
  # Packages to install with cargo
  cargo_packages:
  # - <some_cargo_package>
  cargo_packages_aarch64:
  cargo_packages_x86_64:
  
  # Binaries to be exposed to the host system
  bin_export: 
  - htop 
  - nautilus
  bin_export_aarch64:
  bin_export_x86_64:
  
  # Apps to be exposed to the host system
  app_export: 
  - nautilus
  app_export_aarch64:
  app_export_x86_64:

  # Binaries to be symlinked "into" the container 
  # from the underlying host. Great for container 
  # runtime things, tools already on the host, 
  # things requiring ptrace, etc.
  bin_symlink:
  - podman 
  bin_symlink_aarch:
  bin_symlink_x86_64:

# Extend onto an upstream distrobox
# This is already provided out-of-the-box
# by Immutablue
- name: util
  # Leave image as empty if its changing 
  # how an existing container created in 
  # an upstream image
  image:
  # Still need to have the pkg commands
  pkg_inst_cmd: dnf install -y
  pkg_updt_cmd: dnf update -y
  # Do whatever you want in extra commands
  extra_commands:
  # Add extra packages on top of
  packages:
    - gcc-gfortran

  # Just tweak the stuff below if you want 
  # to add to anything. And note that we 
  # do not need to put the architecture 
  # specific sections. 
  npm_packages:
  pip_packages: 
  cargo_packages:
  bin_export: 
  app_export: 
  bin_symlink:
      

# Brew packages to install or uninstall. 
# Brew only works on x86_64.
brew:
  # Packages to install
  install:

  # Packages to uninstall from upstream images
  uninstall:



